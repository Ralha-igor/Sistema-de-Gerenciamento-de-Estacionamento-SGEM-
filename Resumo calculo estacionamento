1Ô∏è‚É£ Recebendo as datas de entrada e sa√≠da

Pegamos entrada_datetime e saida_datetime do formul√°rio.

Converti essas strings em objetos LocalDateTime usando um DateTimeFormatter:

LocalDateTime entrada = LocalDateTime.parse(entrada_datetime, formatter);
LocalDateTime saida = LocalDateTime.parse(saida_datetime, formatter);

2Ô∏è‚É£ Calculando a dura√ß√£o em minutos

Usamos Duration.between(entrada, saida).toMinutes() para obter o tempo total em minutos.

3Ô∏è‚É£ Convertendo para blocos de 30 minutos

Cada 30 minutos √© considerado um ‚Äúbloco‚Äù de cobran√ßa.

Para cobrar parcialmente os blocos, usamos Math.ceil:

long blocos = (long) Math.ceil(minutos / 30.0);


Exemplo: 35 minutos ‚Üí 2 blocos.

4Ô∏è‚É£ Calculando o valor total

Cada bloco custa R$10,90.

Multiplicamos o n√∫mero de blocos pelo valor e arredondamos para 2 casas decimais:

BigDecimal total = BigDecimal.valueOf(blocos * 10.90).setScale(2, RoundingMode.HALF_UP);
valor_total = total.doubleValue();

5Ô∏è‚É£ Salvando no banco

O valor_total calculado √© setado no objeto Estacionamento antes de salvar:

us.setValor_total(valor_total);
us.save();


üí° Resumo r√°pido:
O sistema pega entrada e sa√≠da, calcula minutos, converte em blocos de 30 minutos, multiplica por R$10,90 e arredonda para 2 casas decimais. Esse valor √© salvo automaticamente no banco ao criar ou atualizar o estacionamento.
